(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(328)},112:function(e,t,a){},139:function(e,t){},188:function(e,t,a){},328:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(101),o=a.n(i),s=(a(112),a(18)),c=a(20),l=a(19),u=a(13),d=a(21),m=a(102),p=a.n(m),h=a(103),f=a.n(h),v=a(104),b=a(31),y=a.n(b),E=a(14),g=(a(188),a(105)),H=(a(327),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.duration,a=this.props.refresh,n=this.props.dataHistorical;return r.a.createElement(g.a,{data:{datasets:[{data:n,label:"PH",pointRadius:1,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",lineTension:0}]},options:{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{}}],xAxes:[{type:"realtime",realtime:{duration:t,delay:1e3,refresh:a,pause:!1,onRefresh:function(t){var a={x:e.props.dataRealTime.x,y:e.props.dataRealTime.y};t.data.datasets.forEach(function(e){e.data.push(a)})}}}]}}})}}]),t}(n.Component)),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={value:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"updateValue",value:function(){this.setState(function(e,t){return{value:t.dataRealTime.y}})}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.updateValue()},1e3)}},{key:"render",value:function(){var e=this.state.value||"unknown";return r.a.createElement("div",null,e)}}]),t}(n.Component),j="https://beer-tech-web-prod.herokuapp.com",k=p()(j);k.on("connect",function(){}),k.on("data-update-ph",function(e){R.y=e.value,R.x=e.timestamp});var w={chart:{height:"200px",width:"100%",position:"relative"},content:{width:"90%",padding:20}},M=[{name:"Last Minute",durationMs:6e4,sampleRateMs:1e3,dataHistorical:[]},{name:"Last 2 Hours",durationMs:72e5,sampleRateMs:3e4,dataHistorical:[]},{name:"Last 24 Hours",durationMs:864e5,sampleRateMs:3e5,dataHistorical:[]}],R={},x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={loading:!0,serverError:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"parseChartData",value:function(e,t){var a={value:"y",timestamp:"x"};e.dataHistorical=y.a.filter(t,function(t){return E(t.timestamp).isAfter(E().subtract(e.durationMs,"milliseconds"))}),e.dataHistorical=y.a.sortBy(e.dataHistorical,["timestamp"]);var n=e.dataHistorical[0].timestamp;return e.dataHistorical=y.a.filter(e.dataHistorical,function(t){return!!E(t.timestamp).isSameOrAfter(E(n))&&(n+=e.sampleRateMs,!0)}),e.dataHistorical=e.dataHistorical.map(function(e){return y.a.mapKeys(e,function(e,t){return a[t]})}),e}}]),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get(j+"/historicals/ph").then(function(t){var a=t.data;return a&&(0===a.length||M.forEach(function(t){t=e.parseChartData(t,a)})),e.setState({loading:!1})}).catch(function(t){return console.log(t),e.setState({serverError:!0}),e.setState({loading:!1})})}},{key:"render",value:function(){var e;if(!0===this.state.loading)e=r.a.createElement("div",null,r.a.createElement(v.MoonLoader,{color:"#36D7B7"}));else if(!0===this.state.serverError)e=r.a.createElement("div",null,"Server Unreachable",r.a.createElement("br",null),r.a.createElement("br",null),"Try Reloading App");else{var t=M.map(function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("h6",null,e.name),r.a.createElement("div",{style:w.chart},r.a.createElement(H,{dataHistorical:e.dataHistorical,dataRealTime:R,duration:e.durationMs,refresh:e.sampleRateMs})))});e=r.a.createElement("div",{style:w.content},r.a.createElement("h2",null,"PH"),r.a.createElement(O,{dataRealTime:R}),t)}return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"App-main"},e))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[107,2,1]]]);
//# sourceMappingURL=main.63bbd66f.chunk.js.map