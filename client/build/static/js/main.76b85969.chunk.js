(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(t,a,e){t.exports=e(328)},112:function(t,a,e){},139:function(t,a){},188:function(t,a,e){},328:function(t,a,e){"use strict";e.r(a);var n=e(0),i=e.n(n),r=e(101),o=e.n(r),s=(e(112),e(18)),c=e(20),l=e(19),u=e(13),d=e(21),m=e(102),p=e.n(m),h=e(103),f=e.n(h),v=e(104),b=e(31),y=e.n(b),H=e(14),E=(e(188),e(105)),O=(e(327),function(t){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(l.a)(a).apply(this,arguments))}return Object(d.a)(a,t),Object(u.a)(a,[{key:"render",value:function(){var t=this,a=this.props.duration,e=this.props.refresh,n=this.props.dataHistorical;return i.a.createElement(E.a,{data:{datasets:[{data:n,label:"PH",pointRadius:1,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",lineTension:0}]},options:{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{}}],xAxes:[{type:"realtime",realtime:{duration:a,delay:1e3,refresh:e,pause:!1,onRefresh:function(a){var e={x:t.props.dataRealTime.x,y:t.props.dataRealTime.y};a.data.datasets.forEach(function(t){t.data.push(e)})}}}]}}})}}]),a}(n.Component)),g=function(t){function a(t){var e;return Object(s.a)(this,a),(e=Object(c.a)(this,Object(l.a)(a).call(this,t))).state={value:null},e}return Object(d.a)(a,t),Object(u.a)(a,[{key:"updateValue",value:function(){this.setState(function(t,a){return{value:a.dataRealTime.y}})}},{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval(function(){return t.updateValue()},1e3)}},{key:"render",value:function(){var t=this.state.value||"unknown";return i.a.createElement("div",null,t)}}]),a}(n.Component),j="https://beer-tech-web-qa.herokuapp.com",k=p()(j);k.on("connect",function(){}),k.on("data-update-ph",function(t){R.y=t.value,R.x=t.timestamp});var w={chart:{height:"200px",width:"100%",position:"relative"},content:{width:"90%",padding:20}},M=[{name:"Last Minute",durationMs:6e5,sampleRateMs:1e3,dataHistorical:[]},{name:"Last 2 Hours",durationMs:72e5,sampleRateMs:3e4,dataHistorical:[]},{name:"Last 24 Hours",durationMs:864e5,sampleRateMs:3e5,dataHistorical:[]}],R={},x=function(t){function a(t){var e;return Object(s.a)(this,a),(e=Object(c.a)(this,Object(l.a)(a).call(this,t))).state={loading:!0},e}return Object(d.a)(a,t),Object(u.a)(a,[{key:"parseChartData",value:function(t,a){var e={value:"y",timestamp:"x"};t.dataHistorical=y.a.filter(a,function(a){return H(a.timestamp).isAfter(H().subtract(t.durationMs,"milliseconds"))}),t.dataHistorical=y.a.sortBy(t.dataHistorical,["timestamp"]);var n=t.dataHistorical[0].timestamp;return t.dataHistorical=y.a.filter(t.dataHistorical,function(a){return!!H(a.timestamp).isSameOrAfter(H(n))&&(n+=t.sampleRateMs,!0)}),t.dataHistorical=t.dataHistorical.map(function(t){return y.a.mapKeys(t,function(t,a){return e[a]})}),t}}]),Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;f.a.get(j+"/historicals/ph").then(function(a){var e=a.data;return M.forEach(function(a){a=t.parseChartData(a,e)}),t.setState({loading:!1})}).catch(function(a){return console.log(a),t.setState({loading:!1})})}},{key:"render",value:function(){var t;if(!0===this.state.loading)t=i.a.createElement("div",null,i.a.createElement(v.MoonLoader,{color:"#36D7B7"}));else{var a=M.map(function(t){return i.a.createElement("div",{key:t.name},i.a.createElement("h6",null,t.name),i.a.createElement("div",{style:w.chart},i.a.createElement(O,{dataHistorical:t.dataHistorical,dataRealTime:R,duration:t.durationMs,refresh:t.sampleRateMs})))});t=i.a.createElement("div",{style:w.content},i.a.createElement("h2",null,"PH"),i.a.createElement(g,{dataRealTime:R}),a)}return i.a.createElement("div",{className:"App"},i.a.createElement("main",{className:"App-main"},t))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[107,2,1]]]);
//# sourceMappingURL=main.76b85969.chunk.js.map