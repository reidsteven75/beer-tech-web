(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(329)},113:function(e,t,a){},140:function(e,t){},189:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(102),o=a.n(i),s=(a(113),a(17)),l=a(19),c=a(18),u=a(12),d=a(20),p=a(103),m=a.n(p),h=a(104),v=a.n(h),f=a(46),b=a(105),g=a.n(b),E=(a(189),a(30)),y=a(106),k=(a(328),{title:{color:"white",fontSize:"16px",marginBottom:"15px"},loader:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},wrapper:{border:"1px solid black",height:"240px",width:"auto",position:"relative",padding:"15px",paddingBottom:"40px",marginBottom:"20px"}}),j=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!0,error:!1};var n=Object(E.a)(Object(E.a)(a));return setInterval(function(){n.checkLoaded()},1e3),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"checkLoaded",value:function(){!1===this.props.isLoading&&this.setState({loading:!1})}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.duration,a=this.props.refresh,n=this.props.dataHistorical,i=r.a.createElement("div",{style:k.loader},r.a.createElement(f.MoonLoader,{size:30,color:"#36D7B7"})),o=r.a.createElement(y.a,{data:{datasets:[{data:n,label:"PH",pointRadius:1,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",lineTension:0}]},options:{maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{}}],xAxes:[{type:"realtime",realtime:{duration:t,delay:2e3,refresh:a,pause:!1,onRefresh:function(t){var a={x:e.props.dataRealTime.x,y:e.props.dataRealTime.y};t.data.datasets.forEach(function(e){e.data.push(a)})}}}]}}});return r.a.createElement("div",{style:k.wrapper},r.a.createElement("div",{style:k.title},this.props.title),this.state.loading?i:o)}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={value:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"updateValue",value:function(){this.setState(function(e,t){return{value:t.dataRealTime.y}})}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.updateValue()},1e3)}},{key:"render",value:function(){var e=this.state.value||"unknown";return r.a.createElement("div",null,e)}}]),t}(n.Component),O="https://beer-tech-web-prod.herokuapp.com",x=m()(O);x.on("connect",function(){}),x.on("data-update-ph",function(e){H.y=e.value,H.x=e.timestamp});var M={content:{width:"80%",padding:20}},R=[{name:"Last Minute",durationMs:6e4,sampleRateMs:500,dataHistorical:[]},{name:"Last 2 Hours",durationMs:72e5,sampleRateMs:3e4,dataHistorical:[]},{name:"Last 24 Hours",durationMs:864e5,sampleRateMs:3e5,dataHistorical:[]}],H={},L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e))).state={loading:!0,serverError:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"mapChartData",value:function(e){var t={value:"y",timestamp:"x"};return e.dataHistorical=e.dataHistorical.map(function(e){return g.a.mapKeys(e,function(e,a){return t[a]})}),e}},{key:"getChartData",value:function(e){var t=this;return v.a.get(O+"/historicals/ph?duration="+e.durationMs+"&samplerate="+e.sampleRateMs).then(function(a){return a.data&&(0===a.data.length||(e.dataHistorical=a.data,e=t.mapChartData(e))),{chart:e}}).catch(function(e){return console.log({err:e}),e})}}]),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({loading:!1}),R.forEach(function(t){t.isLoading=!0,e.getChartData(t).then(function(a){t.isLoading=!1,e.setState({updateData:!0}),a.err?t.isError=!0:t=a.chart})})},1e3)}},{key:"render",value:function(){var e;if(!0===this.state.loading)e=r.a.createElement("div",null,r.a.createElement(f.MoonLoader,{color:"#36D7B7"}));else if(!0===this.state.serverError)e=r.a.createElement("div",null,"Server Unreachable",r.a.createElement("br",null),r.a.createElement("br",null),"Try Reloading App");else{var t=R.map(function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(j,{isLoading:e.isLoading,isError:e.isError,title:e.name,dataHistorical:e.dataHistorical,dataRealTime:H,duration:e.durationMs,refresh:e.sampleRateMs}))});e=r.a.createElement("div",{style:M.content},r.a.createElement("h2",null,"PH"),r.a.createElement(w,{dataRealTime:H}),r.a.createElement("br",null),t,r.a.createElement("br",null))}return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"App-main"},e))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,2,1]]]);
//# sourceMappingURL=main.8cda63d6.chunk.js.map